{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://academicagent.local/schemas/candidates.json",
  "title": "Candidates Schema",
  "description": "Schema for candidate papers from Phase 2 (Database Search)",
  "type": "object",
  "required": ["candidates", "total_candidates", "timestamp"],
  "properties": {
    "candidates": {
      "type": "array",
      "description": "Array of candidate papers found during database search",
      "items": {
        "type": "object",
        "required": ["id", "title", "authors", "year", "database", "search_string"],
        "properties": {
          "id": {
            "type": "string",
            "pattern": "^C[0-9]{3,4}$",
            "description": "Unique candidate ID (e.g., C001, C042)"
          },
          "title": {
            "type": "string",
            "minLength": 10,
            "maxLength": 500,
            "description": "Paper title (sanitized, no HTML)"
          },
          "authors": {
            "type": "array",
            "items": {
              "type": "string",
              "minLength": 2,
              "maxLength": 100
            },
            "minItems": 1,
            "description": "List of author names"
          },
          "year": {
            "type": "integer",
            "minimum": 1900,
            "maximum": 2030,
            "description": "Publication year"
          },
          "abstract": {
            "type": "string",
            "maxLength": 5000,
            "description": "Paper abstract (optional, sanitized)"
          },
          "doi": {
            "type": "string",
            "pattern": "^10\\.[0-9]{4,}/.*$",
            "description": "DOI (optional, format: 10.xxxx/...)"
          },
          "database": {
            "type": "string",
            "enum": [
              "IEEE Xplore",
              "ACM Digital Library",
              "Scopus",
              "SpringerLink",
              "ScienceDirect",
              "PubMed",
              "arXiv",
              "Google Scholar",
              "DBLP",
              "Beck-Online",
              "Juris",
              "HeinOnline",
              "Other"
            ],
            "description": "Source database name"
          },
          "search_string": {
            "type": "string",
            "minLength": 5,
            "description": "Search string that found this paper"
          },
          "citations": {
            "type": "integer",
            "minimum": 0,
            "description": "Citation count (optional)"
          },
          "url": {
            "type": "string",
            "format": "uri",
            "description": "URL to paper (optional)"
          }
        }
      }
    },
    "total_candidates": {
      "type": "integer",
      "minimum": 0,
      "description": "Total number of candidates found"
    },
    "timestamp": {
      "type": "string",
      "format": "date-time",
      "description": "ISO 8601 timestamp of generation"
    },
    "iteration": {
      "type": "integer",
      "minimum": 1,
      "description": "Search iteration number (for iterative search)"
    },
    "databases_searched": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "description": "List of databases searched in this iteration"
    }
  }
}
